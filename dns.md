# DNS

## サーバの種類

DNSサーバは、2種類に大別される

- コンテンツサーバ
- キャッシュサーバ

また、クライアント上で名前解決を行うプログラムを「スタブリゾルバ」または「リゾルバ」という

## コンテンツサーバ

DNSサーバでは、ドメインごとの情報を「ゾーン」と呼ばれる単位で管理している。ゾーンの中には、そのドメインの情報（ドメイン名や属性など）やホスト名、IPアドレス、ネームサーバ情報など、さまざまな情報が「レコード」として記録されている。

あるドメインの権威情報を提供するDNSサーバを特に「コンテンツサーバ」とか「権威DNSサーバ（authoritative name server）」という。コンテンツサーバは、外部からのDNS問い合わせに応答する責任を持つ。コンテンツサーバを上位のDNSサーバに登録することにより、ルートからドメインの階層をたどって、目的のドメインやそこにあるホスト名などを見つけることができるようになる。

### レコードの種類

| 種類  |       レコード名        |                                      説明                                      |
| :---: | :---------------------: | :----------------------------------------------------------------------------: |
|   A   |         Address         |             ドメインのサービスをホストするサーバのIPアドレスを指定             |
| AAAA  |      Quad Address       |                IPv6アドレスをAレコード同様に設定する場合に使用                 |
| CNAME |     Canonical Name      |      `www`や`mail`などのサブドメインを別のホスト名のエイリアスとして指定       |
|  MX   |      Mail Exchange      |                  メール送信に使用するサーバのレコードを指定                  |
|  TXT  |          Text           |                      DNSサーバー上にテキストの情報を指定                       |
|  SOA  |   Start of Authority    |        ゾーンに関する情報を指定               |
|  NS   |       Name Server       |       DNS情報を参照するサーバーを指定。一般的には複数のNSレコード        |
|  SPF  | Sender Policy Framework | 対象となるドメインを使用してメールを送信する際のメールサーバのIPアドレスを指定 |
|  PTR  |         Pointer         |                  IPアドレスからホスト名を参照する場合の逆引き                  |
|  SRV  |         Service         |    特定のサービスをホストしている端末や、そのポート番号を指定する場合に使用    |

## キャッシュサーバ

キャッシュサーバは、クライアントから再帰的問い合わせを受けて、最終的な答えを得られるまで他のDNSサーバに問い合わせを行う。キャッシュサーバは、フルサービスリゾルバともいう。

# Ref

- https://www.atmarkit.co.jp/ait/articles/1706/22/news022.html
